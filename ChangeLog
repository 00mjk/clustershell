2010-02-17 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.2 beta 5 released.

2010-02-16 S. Thiell <stephane.thiell@cea.fr>

	* NodeSet.py: Fix mixed-type comparisons, where, like standard set(),
	are allowed, instead of raising TypeError.

2010-02-15 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.2 beta 4 released.
	
	* MsgTree.py: Added MsgTreeElem.splitlines() method as alias of lines().

2010-02-14 S. Thiell <stephane.thiell@cea.fr>
	
	* Updated doc/man pages for latest clush changes and added clubak tool.

	* Worker/Ssh.py: Fix Ssh worker issue where sometimes stderr buffer could
	not be read completely (trac ticket #50).

2010-02-13 S. Thiell <stephane.thiell@cea.fr>
	
	* scripts/clush.py: Comply with clubak by adding -L option that allow
	switching to alternative line mode display (when using -b). Also, sort
	buffers by nodes or nodeset length like clubak (fix trac ticket #54).

2010-02-11 S. Thiell <stephane.thiell@cea.fr>
	
	* Version 1.2 beta 3 released.

	* scripts/clush.py: For clush --copy, when --dest is not specified, set
	the destination path to the source dirname path and not the source full
	path.

	* scripts/clush.py: Added option --nostdin to prevent reading from
	standard input (fix trac ticket #49).

	* Engine/Factory.py: Disable Engine.EPoll automatic selection as an issue
	has been found with clush when stdin is a plain file (<file redirections).
	Engine.Poll is now the default engine for all platforms. Created trac
	ticket #56 to follow this issue.

2010-02-10 S. Thiell <stephane.thiell@cea.fr>
	
	* Worker/Worker.py: Added missing WorkerSimple.last_error() method. Fixed
	worker bad argument error exception.

	* Worker/Ssh.py: Added command, source and dest public instance variable.

	* Worker/Pdsh.py: Added command, source and dest public instance variable.

	* scripts/clush.py: Due to set_info() behaviour modifications in
	multi-thread mode, change some set_info() for set_default() to modify
	task specific dictionary synchronously. Also remove splitlines() where
	MsgTreeElem are returned instead of whole buffer after latest MsgTree
	improvements.

	* scripts/clubak.py: Added clubak utility (trac ticket #47). It provides
	 dshbak backward-compatibility, but always try to sort buffers by nodes or
	 nodeset. It also provides additional -L option to switch to alternative
	 line mode display.

2010-02-09 S. Thiell <stephane.thiell@cea.fr>

	* Worker.py: Updated Task/MsgTree dependencies. Added iter_node_errors()
	method. Added match_keys optional parameter to iter_node_buffers() and
	iter_node_errors(). Added WorkerSimple.error() method (read stderr).
	Added tests.

	* Task.py: Updated MsgTree dependencies. Factorized most tree data's
	access methods.

	* MsgTree.py: Merged Msg and _MsgTreeElem in one class MsgTreeElem. All
	message objects returned are now instance of MsgTreeElem. Some algorithms
	improvements. Renamed main MsgTree access methods: messages(), items() and
	walk(). Added more docstring.

	* NodeSet.py: Modified NodeSet.__iter__() and __str__() so that nodes are
	now always sorted by name/pattern (eg. acluster2, bcluster1).

2010-02-07 S. Thiell <stephane.thiell@cea.fr>

	* MsgTree.py: Rewrite of MsgTree module with a better API (part of trac
	ticket #47). Adapted library classes. Added specific tests.

2010-02-02 S. Thiell <stephane.thiell@cea.fr>

	* Task.py: Add Task.key_error() and its alias node_error() methods for
	easy retrieving of error buffers for a specified key/node.

	* scripts/clush.py: Fix stdout/stderr separation issue (introduced
	in 1.2b2) thanks to the new Task.set_default() method.

	* Task.py: As set_info() is now dispatched through the task special port,
	and applied only on task.resume() when called from another thread, add two
	new methods default() and set_default() to synchronously manage another
	task specific dictionary, useful for default configuration parameters.

2010-02-01 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.2 beta 2 released.

2010-02-01 A. Degremont  <aurelien.degremont@cea.fr>

	* NodeSet.py: Added __getslice__() and split() method to RangeSet.
	Added split() to NodeSet (trac ticket #18).

2010-02-01 S. Thiell <stephane.thiell@cea.fr>

	* NodeSet.py: Added equality comparisons for RangeSet and NodeSet. Fixed
	a bug in NodeSet.issuperset().

	* mkrpm.sh: Improve RPM build process and allow SRPM package to be
	easily rebuilt (trac ticket #51).

2010-01-31 S. Thiell <stephane.thiell@cea.fr>

	* scripts/clush.py: Fix broken pipe issue (trac ticket #34).

	* scripts/clush.py: Fix unhandled NodeSet parse error (trac ticket #36).

	* scripts/clush.py: Display uncompleted nodes on keyboard interrupt.

2010-01-29 S. Thiell <stephane.thiell@cea.fr>

	* scripts/clush.py: Return some error code when -S -u TIMEOUT is used
	and some command timeout occurred (trac ticket #48).

	* scripts/clush.py: Display output messages on KeyboardInterrupt (trac
	ticket #22).

	* tests/TaskThreadJoinTest.py: Added test cases for task.join().

	* tests/TaskThreadSuspendTest.py: Added test cases for
	task.suspend().

	* tests/TaskPortTest.py: Added test cases for task.port().

	* Task.py: Improved features in multithreaded environments thanks
	to new port feature: abort(), suspend(), resume(), schedule(), etc.
	are now thread-safe (trac ticket #21).

	* Worker/EngineClient.py: Added port feature, a way to communicate between
	different tasks.

2009-12-09 A. Degremont  <aurelien.degremont@cea.fr>

	* scripts/clush.py: Add -X flag to exclude node groups.
	  Node flags -w/-x/-g/-X can now be specified multiple times.

2009-12-17 S. Thiell <stephane.thiell@cea.fr>

	* Engine/Factory.py: Add engine automatic selection mechanism (trac
	ticket #10).

	* Task.py: Add task_terminate() function for convenience.

2009-12-15 S. Thiell <stephane.thiell@cea.fr>

	* scripts/clush.py: Fix clush -q/--quiet issue again!

2009-12-09 A. Degremont  <aurelien.degremont@cea.fr>

	* scripts/nodeset.py: Protect --separator from code injection and
	handle gracefully incorrect separtor.

2009-12-09 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.2 beta 1 released.

	* scripts/clush.py and library: Add -p option when using --copy to
	preserve file modification times and modes.

	* scripts/clush.py: Fix clush -q/--quiet issue.

	* scripts/nodeset.py: Add separator option to nodeset
	--expand with -S <string> (trac ticket #39).

	* Worker/Pdsh.py: Added copy support for directory (automatic
	detection). Added non-reg tests.

2009-12-08 S. Thiell <stephane.thiell@cea.fr>

	* scripts/clush.py: Added source presence check on copy.

2009-12-07 S. Thiell <stephane.thiell@cea.fr>

	* Worker/Ssh.py: Added copy support for directory (automatic
	detection).

	* Worker/Ssh.py: Fix Scp Popen4->subprocess.popen issue (simple
	quote escape not needed).

2009-11-10 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.2 beta 0 released. Updated doc and man pages for 1.2.

2009-11-09 S. Thiell <stephane.thiell@cea.fr>

	* Engine/EPoll.py: Add stdout/stderr support (still experimental).

	* Worker/Pdsh.py: Fix stdout/stderr support.

    * Backport recent 1.1-branch improvements: tests code coverage, also
	resulting in some fixes (see 1.1 2009-10-28).

2009-11-09 S. Thiell <stephane.thiell@cea.fr>

	* scripts/clush.py: Added stdout/stderr support in clush script.

2009-11-04 S. Thiell <stephane.thiell@cea.fr>

	* Added optional separate stdout/stderr handling (with 1.1 Task API
	compat). Added some tests for that.

	* Create a MsgTree class in MsgTree.py and remove this code from
	Task.py.

	* First changes to use setUp() in test case objects.

2009-08-02 S. Thiell <stephane.thiell@cea.fr>

	* clush.py: (1) remove /step in displayed nodeset when using -b (to
	allow copy/paste to other tools like ipmipower that doesn't support
	N-M/STEP ranges), (2) when command timeout is specified (-u), show
	nodes (on stderr) that didn't have time to fully complete, (3) flush
	stdio buffers before exiting. [merged from branch 1.1]

2009-07-29 S. Thiell <stephane.thiell@cea.fr>

	* tests/NodeSetScriptTest.py: added unit test for scripts/nodeset.py

	* NodeSet.py: fixed a problem with intersection_update() when used
	with two simple nodes (no rangeset).

	* scripts/nodeset.py: merge -i and -X options issue fix from 1.1
	branch (#29)

2009-07-28 S. Thiell <stephane.thiell@cea.fr>

	* scripts/clush.py: remove DeprecationWarning ignore filter (the
	library is now natively Python 2.6/Fedora 11 ready)

	* Change all sets to use built in set type available since Python 2.4
	(the sets module is deprecated).

	* Engine/EPoll.py: added epoll based Engine (Python 2.6+ needed)

	* Engine/Poll.py: added _register_specific() and
	_unregister_specific() methods to match modified Engine base class.

	* Engine/Engine.py: added calls to derived class's
	_register_specific() and _unregister_specific() instead of only
	_modify_specific()

2009-07-23 S. Thiell <stephane.thiell@cea.fr>

	* Replaced popen2.Popen4 (deprecated) by subprocess.Popen (Python 2.4+),
	renaming Worker.Popen2 to Worker.Popen.

	* clush.py: (backport for 1.1 branch) fix another command_timeout (-u)
	issue, now the command_timeout value is passed as the timeout value at
	worker level.

	* Version 1.1 branched.

2009-07-22 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 RC 2 released.

	* clush.py: change -u timeout behavior, if set it's now the timeout value
	passed to task.shell() (and not connect_timeout + command_timeout).

	* clush.py: add -o options to pass custom ssh options (#24).

	* Worker/Ssh.py: simple quote escape fix (trac ticket #25).

	* Worker/Popen2.py: simple quote escape fix (trac ticket #25)

	* clush.py: fix options issue when using -f, -u or -t.

2009-07-13 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 RC 1 released.

	* Changed license to CeCILL-C (http://www.cecill.info).

	* clush.py (ttyloop): (feature) added '=' special command in
	interactive mode to toggle output format mode (standard/gathered).

	* Engine/Engine.py (register): (bug) register writer fd to even when
	set_writer_eof() has previously been called.

	* Worker/EngineClient.py (_handle_write): (bug) don't close writer
	when some data remains in write buffer, even if self._weof is True.

2009-07-10 S. Thiell <stephane.thiell@cea.fr>

	* clush.py (ttyloop): added a workaround to replace raw_input() which
	is not interruptible in Python 2.3 (issue #706406).

2009-07-09 S. Thiell <stephane.thiell@cea.fr>

	* NodeSet.py (__contains__): fixed issue that could appear when
	padding was used, eg. "node113" in "node[030,113] didn't work.

2009-07-08 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 beta 6 released.

	* clush.py: major improvements (added write support, better
	interactive mode with readline, launch task in separate thread to let
	the main thread blocking tty input, added Enter key press support
	during run, added node groups support (-a and -g) using external
	commands defined in clush.conf, added --copy toggle to clush to copy
	files to the cluster nodes, added -q option, added progress indicator
	when clush is called with gather option -b)

	* Added man pages for clush and nodeset commands.

	* doc/extras/vim (clush.vim): added vim syntax files for clush.conf

	* Engine.py: (feature) added write support to workers

	* Worker: (api)  created a base class WorkerSimple

2009-04-17 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 beta 5 released (LUG'09 live update).

	* Worker/Worker.py: (bug) update last_node so that user can call
	worker.last_node() in an ev_timeout handler callback.

2009-04-17 A. Degremont  <aurelien.degremont@cea.fr>

	* clush.py: (feature) make use of optparse.OptionParser

2009-04-15 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 beta 4 released.

2009-04-14 S. Thiell <stephane.thiell@cea.fr>

	* Engine/Engine.py (EngineBaseTimer): (bug) fixed issue in timers when
	invalidated two times.

2009-04-06 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 beta 3 released.

	* Engine/Engine.py (_EngineTimerQ): (bug) fixed issue in timer
	invalidation.

2009-04-03 S. Thiell <stephane.thiell@cea.fr>

	* Engine/Engine.py (EngineTimer): (api) added is_valid() method to
	check if a timer is still valid.

	* Task.py: (api) added optional `match_keys' parameter in Task and
	Worker iter_buffers() and iter_retcodes() methods.

2009-03-26 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 beta 2 released.

2009-03-23 S. Thiell <stephane.thiell@cea.fr>

	* Worker/Worker.py: (api) added Worker.did_timeout() method to check
	if a worker has timed out (useful for Popen2 workers, other use
	DistantWorker.num_timeout()).

2009-02-21 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 beta 1 released.

2009-02-20 S. Thiell <stephane.thiell@cea.fr>

	* NodeSet.py (NodeSet): (api) added clear() method.
	(RangeSet): likewise.

	* NodeSet.py (NodeSet): added workaround to allow NodeSet to be
	properly pickled (+inf floating number pickle bug with Python 2.4)

	* NodeSet.py (RangeSet): (bug) don't keep a reference on internal
	RangeSet when creating a NodeSet from another one.

2009-02-16 S. Thiell <stephane.thiell@cea.fr>

	* Version 1.1 beta 0 released.

	* Worker/Ssh.py: (feature) new worker, based on OpenSSH, with fanout
	support (thus removing ClusterShell mandatory pdsh dependency).

	* Engine/Engine.py: (feature, api) added timer and repeater support.

	* 1.0->1.1 internal design changes.


Copyright CEA/DAM/DIF  (2009, 2010)
Copying and distribution of this file, with or without modification, are
permitted provided the copyright notice and this notice are preserved.
